extends ../../layouts/default.pug
include ../../mixins/alert.pug
block main
    if (role.permission.includes("accounts-view"))
        h2 Danh Sách Sản Phẩm
        +alertsuccess(5000)
        +alerterror(5000)
        //- .card.mb-3
        //-     .card-header Bộ lọc và Tìm kiếm
        //-     .card-body     
        //-         .row 
        //-             .col-6
        //-                 +fillter-status(FillterStatus)
        //-             .col-3 
        //-                 //- select(name="status" class="form-control")
        //-                 //-     each item in FillterStatus
        //-                 //-         option(value=item.status selected=item.class=="active" ? true : false) --#{item.name}--
        //-                 +search(keyword)
        .card.mb-3
            .card-header Danh Sách Tài Khoản
                .card-body
                    .row 
                        .col-4
                        //-     +form-change-multi(`${PrefixAdmin}/products/change-multi?_method=PATCH`)
                        .col-5
                        //-     +sort()
                        .col-3
                            if (role.permission.includes("accounts-create"))
                                a(href=`${PrefixAdmin}/accounts/create` class="btn btn-outline-success") +Thêm Mới
                    table(class="table table-hover" checkbox-multi)
                            thead
                                tr  
                                    th
                                        input(type="checkbox" name="checkall")
                                    th STT
                                    th Avatar
                                    th Họ tên
                                    th Phân Quyền
                                    th Email
                                    th Trạng Thái
                                    th Hành Động
                            tbody 
                                each item,index in records
                                    tr      
                                        td
                                            input(type="checkbox" name="id" value=item.id)
                                        td #{index + 1}
                                        td
                                            img(src=item.avatar, width="120px" height="auto" alt=item.fullName)
                                        td #{item.fullName}
                                        td #{item.role.title}
                                        td #{item.email}
                                        td  
                                            if (role.permission.includes("accounts-edit"))
                                                if(item.status == "active")
                                                    a(href="javascript::" class="badge badge-success" data-id=item.id data-status=item.status change-status ) Hoạt Động
                                                else
                                                    a(href="javascript::" class="badge badge-danger" data-id=item.id data-status=item.status  change-status  ) Dừng Hoạt Động
                                            else 
                                                if(item.status == "active")
                                                    span( class="badge badge-success") Hoạt Động
                                                else
                                                    span( class="badge badge-danger") Dừng Hoạt Động
                                        td  
                                            a(class="btn btn-secondary btn-sm btn-detail" href=`${PrefixAdmin}/products/detail/${item.id}` ) Chi Tiết
                                            if (role.permission.includes("accounts-edit"))
                                                a(class="btn btn-warning btn-sm" href=`${PrefixAdmin}/accounts/edit/${item.id}` ) Sửa
                                            if (role.permission.includes("accounts-delete"))
                                                button(class="btn btn-danger btn-sm ml-1" data-id=item.id btn-delete-item ) Xóa